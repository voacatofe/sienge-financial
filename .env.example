# ===========================================
# SIENGE FINANCIAL - Environment Variables
# ===========================================
# IMPORTANTE: Copie este arquivo para .env e preencha com suas credenciais reais
# cp .env.example .env

# ===========================================
# API SIENGE
# ===========================================
# Subdomínio da sua empresa no Sienge
SIENGE_SUBDOMAIN=sua-empresa

# Credenciais de acesso à API do Sienge
SIENGE_USERNAME=seu-usuario
SIENGE_PASSWORD_ABF=sua-senha-aqui

# ===========================================
# SINCRONIZAÇÃO AUTOMÁTICA
# ===========================================
# Backfill: Quantos anos buscar na primeira sincronização (detecção automática)
# OTIMIZAÇÃO: Reduzido de 5 para 1 ano para melhor performance no Looker Studio
# Hot data (últimos 12 meses) = 90% das consultas + queries sub-segundo
BACKFILL_YEARS=1

# Incremental: Janela de overlap para sincronizações diárias (em dias)
# Overlap garante que não perde dados se alguma sincronização falhar
INCREMENTAL_LOOKBACK_DAYS=7

# NOTA: Não é necessário definir SYNC_START_DATE e SYNC_END_DATE manualmente
# O sistema detecta automaticamente:
# - Primeira execução (banco vazio) → Backfill (último 1 ano)
# - Execuções subsequentes → Incremental (últimos 7 dias com overlap)

# ===========================================
# DATA RETENTION POLICY (Novo - Performance)
# ===========================================
# Período de dados "quentes" mantidos no banco para queries rápidas (meses)
# Dados além deste período podem ser arquivados para reduzir volume
HOT_DATA_RETENTION_MONTHS=12

# Período total de dados no banco (incluindo warm data) - meses
# Dados mais antigos que isso devem ser exportados para cold storage
TOTAL_DATA_RETENTION_MONTHS=24

# ===========================================
# BANCO DE DADOS POSTGRESQL
# ===========================================
# Nome do banco de dados
POSTGRES_DB=sienge_data

# Usuário do banco de dados
POSTGRES_USER=sienge_app

# IMPORTANTE: Use uma senha FORTE em produção!
# Sugestão: Use um gerador de senhas aleatórias
POSTGRES_PASSWORD=TROQUE_ESTA_SENHA_EM_PRODUCAO

# Host do PostgreSQL (use 'db' para Docker, ou IP/hostname para externo)
POSTGRES_HOST=db

# Porta do PostgreSQL
POSTGRES_PORT=5432

# ===========================================
# CONFIGURAÇÕES DA API REST
# ===========================================
# Host da API FastAPI (normalmente não precisa mudar)
API_HOST=0.0.0.0

# Porta da API FastAPI
API_PORT=8000

# Número de workers do Uvicorn (ajuste conforme recursos do servidor)
API_WORKERS=2

# ===========================================
# AMBIENTE
# ===========================================
# Ambiente de execução: development, production
ENVIRONMENT=production

# ===========================================
# NOTAS DE SEGURANÇA
# ===========================================
# 1. NUNCA commite o arquivo .env para o repositório Git
# 2. Use senhas fortes e únicas para POSTGRES_PASSWORD
# 3. Em produção no Easypanel, configure estas variáveis através da interface
# 4. Mantenha suas credenciais do Sienge seguras
# 5. Revise regularmente o período de sincronização (SYNC_START_DATE/SYNC_END_DATE)